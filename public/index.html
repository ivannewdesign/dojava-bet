<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dojava.bet - Live Sports Predictions</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: #f5f7fa;
      color: #2d3748;
      line-height: 1.6;
    }
    
    /* HEADER */
    .header {
      background: #ffffff;
      padding: 20px 0;
      border-bottom: 1px solid #e2e8f0;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 28px;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-decoration: none;
    }
    
    .nav {
      display: flex;
      gap: 30px;
    }
    
    .nav a {
      color: #4a5568;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s;
    }
    
    .nav a:hover {
      color: #667eea;
    }
    
    /* SPORT TABS - STICKY */
    .sport-tabs {
      background: #ffffff;
      padding: 15px 20px;
      display: flex;
      gap: 10px;
      justify-content: center;
      border-bottom: 1px solid #e2e8f0;
      position: sticky;
      top: 0;
      z-index: 99;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .sport-tab {
      padding: 10px 25px;
      background: #f7fafc;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #4a5568;
    }
    
    .sport-tab:hover {
      border-color: #cbd5e0;
      background: #edf2f7;
    }
    
    .sport-tab.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-color: #667eea;
      color: #ffffff;
    }
    
    /* MAIN LAYOUT */
    .main-layout {
      display: flex;
      max-width: 1400px;
      margin: 20px auto;
      gap: 20px;
      padding: 0 20px;
    }
    
    /* SIDEBAR */
    .sidebar {
      width: 280px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      overflow: hidden;
      position: sticky;
      top: 100px;
      height: fit-content;
      max-height: calc(100vh - 120px);
      overflow-y: auto;
    }
    
    .sidebar-section {
      border-bottom: 1px solid #f0f4f8;
    }
    
    .sidebar-title {
      font-size: 11px;
      font-weight: 700;
      color: #a0aec0;
      text-transform: uppercase;
      padding: 15px 20px 10px;
      letter-spacing: 1px;
      background: #f7fafc;
    }
    
    /* PINNED LEAGUES */
    .pinned-league {
      padding: 10px 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .pinned-league:hover {
      background: #f7fafc;
    }
    
    .pinned-league.active {
      background: #edf2f7;
      color: #667eea;
    }
    
    .league-flag {
      font-size: 16px;
    }
    
    .pin-icon {
      margin-left: auto;
      cursor: pointer;
      opacity: 0.4;
      font-size: 12px;
      transition: opacity 0.2s;
    }
    
    .pin-icon:hover {
      opacity: 1;
    }
    
    /* COUNTRIES */
    .country-item {
      border-bottom: 1px solid #f0f4f8;
    }
    
    .country-header {
      padding: 12px 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      color: #4a5568;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.2s;
    }
    
    .country-header:hover {
      background: #f7fafc;
    }
    
    .country-arrow {
      margin-left: auto;
      transition: transform 0.3s;
      font-size: 12px;
      color: #a0aec0;
    }
    
    .country-item.expanded .country-arrow {
      transform: rotate(180deg);
    }
    
    .country-leagues {
      display: none;
      background: #fafbfc;
      padding: 5px 0;
    }
    
    .country-item.expanded .country-leagues {
      display: block;
    }
    
    .country-league {
      padding: 8px 20px 8px 50px;
      cursor: pointer;
      font-size: 13px;
      color: #718096;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }
    
    .country-league:hover {
      background: #f0f4f8;
      color: #2d3748;
    }
    
    .country-league.pinned {
      color: #667eea;
      font-weight: 600;
    }
    
    .show-more-btn {
      padding: 15px 20px;
      text-align: center;
      cursor: pointer;
      font-size: 13px;
      color: #667eea;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .show-more-btn:hover {
      background: #f7fafc;
    }
    
    /* CONTENT */
    .content {
      flex: 1;
      max-width: 800px;
    }
    
    /* AD SPACE */
    .ad-space {
      width: 300px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 20px;
      text-align: center;
      color: #a0aec0;
      font-size: 14px;
      position: sticky;
      top: 100px;
      height: fit-content;
    }
    
    .ad-placeholder {
      border: 2px dashed #e2e8f0;
      border-radius: 8px;
      padding: 80px 20px;
      margin-bottom: 20px;
    }
    
    /* LEAGUE SECTION */
    .league-section {
      margin-bottom: 30px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .league-header {
      background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
      padding: 12px 20px;
      font-weight: 700;
      font-size: 14px;
      color: #2d3748;
      border-left: 4px solid #667eea;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .league-country {
      color: #a0aec0;
      font-size: 12px;
      font-weight: 600;
    }
    
    /* MATCH CARD */
    .match-card {
      padding: 12px 20px;
      border-bottom: 1px solid #f0f4f8;
      transition: all 0.2s;
      cursor: pointer;
    }
    
    .match-card:last-child {
      border-bottom: none;
    }
    
    .match-card:hover {
      background: #f7fafc;
    }
    
    .match-header {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 8px;
    }
    
    .match-time {
      background: #667eea;
      color: white;
      padding: 3px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
    }
    
    .match-time.live {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    .match-teams {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 15px;
    }
    
    .team {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .team-logo {
      width: 22px;
      height: 22px;
      object-fit: contain;
    }
    
    .team-name {
      font-size: 14px;
      font-weight: 600;
      color: #2d3748;
      flex: 1;
    }
    
    .team-score {
      font-size: 18px;
      font-weight: 800;
      color: #667eea;
      min-width: 25px;
      text-align: center;
    }
    
    .match-vs {
      padding: 0 10px;
      font-size: 14px;
      font-weight: 700;
      color: #cbd5e0;
    }
    
    .team-right {
      flex-direction: row-reverse;
    }
    
    /* LOADING */
    .loading {
      text-align: center;
      padding: 60px;
      font-size: 16px;
      color: #a0aec0;
    }
    
    .spinner {
      border: 3px solid rgba(102, 126, 234, 0.2);
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* NO MATCHES */
    .no-matches {
      text-align: center;
      padding: 80px 20px;
      color: #a0aec0;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .no-matches h2 {
      color: #4a5568;
      margin-bottom: 10px;
    }
    
    /* SCROLLBAR */
    .sidebar::-webkit-scrollbar {
      width: 6px;
    }
    
    .sidebar::-webkit-scrollbar-track {
      background: #f7fafc;
    }
    
    .sidebar::-webkit-scrollbar-thumb {
      background: #cbd5e0;
      border-radius: 3px;
    }
    
    .sidebar::-webkit-scrollbar-thumb:hover {
      background: #a0aec0;
    }
    
    /* RESPONSIVE */
    @media (max-width: 1200px) {
      .ad-space {
        display: none;
      }
    }
    
    @media (max-width: 1024px) {
      .sidebar {
        display: none;
      }
      
      .content {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <a href="/" class="logo">DOJAVA.BET</a>
      <nav class="nav">
        <a href="#live">Live</a>
        <a href="#leagues">Leagues</a>
        <a href="#premium">Premium</a>
      </nav>
    </div>
  </header>

  <!-- SPORT TABS - STICKY -->
  <div class="sport-tabs">
    <div class="sport-tab active" data-sport="football">
      <span>âš½</span> Football
    </div>
    <div class="sport-tab" data-sport="basketball">
      <span>ğŸ€</span> Basketball
    </div>
    <div class="sport-tab" data-sport="tennis">
      <span>ğŸ¾</span> Tennis
    </div>
  </div>

  <!-- MAIN LAYOUT -->
  <div class="main-layout">
    
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="loading">
        <div class="spinner"></div>
        Loading...
      </div>
    </aside>

    <!-- CONTENT -->
    <main class="content" id="content">
      <div class="loading">
        <div class="spinner"></div>
        Loading matches...
      </div>
    </main>

    <!-- AD SPACE -->
    <aside class="ad-space">
      <div class="ad-placeholder">
        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ“Š</div>
        <div>Advertisement Space</div>
        <div style="font-size: 11px; margin-top: 5px;">300 x 600</div>
      </div>
      <div class="ad-placeholder" style="padding: 40px 20px;">
        <div style="font-size: 36px; margin-bottom: 10px;">ğŸ“ˆ</div>
        <div>Google AdSense</div>
        <div style="font-size: 11px; margin-top: 5px;">300 x 250</div>
      </div>
    </aside>

  </div>

  <script>
    // ==================== STATE ====================
    let allMatches = {
      football: [],
      basketball: [],
      tennis: []
    };
    
    let currentSport = 'football';
    
    let pinnedLeaguesBySport = JSON.parse(localStorage.getItem('pinnedLeaguesBySport')) || {
      football: getDefaultPinnedLeagues('football'),
      basketball: getDefaultPinnedLeagues('basketball'),
      tennis: getDefaultPinnedLeagues('tennis')
    };
    
    let expandedCountries = {};
    let countryLeagues = {};
    let showAllCountries = false;
    
    // ==================== DEFAULT PINNED LEAGUES BY SPORT ====================
    function getDefaultPinnedLeagues(sport) {
      if (sport === 'football') {
        return [
          { name: 'UEFA Champions League', flag: 'ğŸ†' },
          { name: 'UEFA Europa League', flag: 'ğŸ†' },
          { name: 'UEFA Conference League', flag: 'ğŸ†' },
          { name: 'Premier League', flag: 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿' },
          { name: 'LaLiga', flag: 'ğŸ‡ªğŸ‡¸' },
          { name: 'Bundesliga', flag: 'ğŸ‡©ğŸ‡ª' },
          { name: 'Serie A', flag: 'ğŸ‡®ğŸ‡¹' },
          { name: 'Ligue 1', flag: 'ğŸ‡«ğŸ‡·' },
          { name: 'Premijer Liga BiH', flag: 'ğŸ‡§ğŸ‡¦' },
          { name: 'HNL', flag: 'ğŸ‡­ğŸ‡·' },
          { name: 'SuperLiga', flag: 'ğŸ‡·ğŸ‡¸' },
          { name: 'World Cup Qualifiers', flag: 'ğŸŒ' }
        ];
      } else if (sport === 'basketball') {
        return [
          { name: 'NBA', flag: 'ğŸ€' },
          { name: 'EuroLeague', flag: 'ğŸ†' },
          { name: 'EuroCup', flag: 'ğŸ†' },
          { name: 'ABA League', flag: 'ğŸ€' }
        ];
      } else if (sport === 'tennis') {
        return [
          { name: 'ATP Tour', flag: 'ğŸ¾' },
          { name: 'WTA Tour', flag: 'ğŸ¾' },
          { name: 'Grand Slam', flag: 'ğŸ†' },
          { name: 'Davis Cup', flag: 'ğŸ†' }
        ];
      }
      return [];
    }
    
    function getCurrentPinnedLeagues() {
      return pinnedLeaguesBySport[currentSport] || [];
    }

    // ==================== GET INTERNATIONAL LEAGUES ====================
function getInternationalLeagues() {
  if (currentSport === 'football') {
    return [
      { name: 'UEFA Champions League', flag: 'ğŸ†' },
      { name: 'UEFA Europa League', flag: 'ğŸ†' },
      { name: 'UEFA Conference League', flag: 'ğŸ†' },
      { name: 'UEFA Nations League', flag: 'ğŸ†' },
      { name: 'Copa Libertadores', flag: 'ğŸ†' },
      { name: 'Copa Sudamericana', flag: 'ğŸ†' },
      { name: 'CAF Champions League', flag: 'ğŸ†' },
      { name: 'AFC Champions League', flag: 'ğŸ†' },
      { name: 'CONCACAF Champions League', flag: 'ğŸ†' },
      { name: 'World Cup', flag: 'ğŸŒ' },
      { name: 'World Cup Qualifiers', flag: 'ğŸŒ' },
      { name: 'European Championship', flag: 'ğŸ‡ªğŸ‡º' },
      { name: 'Copa America', flag: 'ğŸ†' },
      { name: 'Africa Cup of Nations', flag: 'ğŸ†' }
    ];
  } else if (currentSport === 'basketball') {
    return [
      { name: 'NBA', flag: 'ğŸ€' },
      { name: 'EuroLeague', flag: 'ğŸ†' },
      { name: 'EuroCup', flag: 'ğŸ†' },
      { name: 'ABA League', flag: 'ğŸ†' },
      { name: 'Basketball Champions League', flag: 'ğŸ†' },
      { name: 'FIBA World Cup', flag: 'ğŸŒ' },
      { name: 'FIBA EuroBasket', flag: 'ğŸ‡ªğŸ‡º' }
    ];
  } else if (currentSport === 'tennis') {
    return [
      { name: 'ATP Tour', flag: 'ğŸ¾' },
      { name: 'WTA Tour', flag: 'ğŸ¾' },
      { name: 'Grand Slam', flag: 'ğŸ†' },
      { name: 'Davis Cup', flag: 'ğŸ†' },
      { name: 'Billie Jean King Cup', flag: 'ğŸ†' },
      { name: 'ATP Finals', flag: 'ğŸ†' },
      { name: 'WTA Finals', flag: 'ğŸ†' }
    ];
  }
  return [];
}

// ==================== TOGGLE INTERNATIONAL LEAGUE ====================
function toggleInternationalLeague(leagueName, flag) {
  const pinnedLeagues = getCurrentPinnedLeagues();
  const isPinned = pinnedLeagues.some(p => p.name === leagueName);
  
  if (isPinned) {
    unpinLeague(leagueName);
  } else {
    pinnedLeagues.push({ 
      name: leagueName, 
      flag: flag 
    });
    pinnedLeaguesBySport[currentSport] = pinnedLeagues;
    localStorage.setItem('pinnedLeaguesBySport', JSON.stringify(pinnedLeaguesBySport));
    renderSidebar();
    renderMatches();
  }
}
    
    // ==================== COUNTRIES DATA ====================
    const COUNTRIES = [
      { id: 17, name: 'Albania', flag: 'ğŸ‡¦ğŸ‡±' },
      { id: 18, name: 'Algeria', flag: 'ğŸ‡©ğŸ‡¿' },
      { id: 19, name: 'Andorra', flag: 'ğŸ‡¦ğŸ‡©' },
      { id: 20, name: 'Angola', flag: 'ğŸ‡¦ğŸ‡´' },
      { id: 21, name: 'Antigua & Barbuda', flag: 'ğŸ‡¦ğŸ‡¬' },
      { id: 22, name: 'Argentina', flag: 'ğŸ‡¦ğŸ‡·' },
      { id: 23, name: 'Armenia', flag: 'ğŸ‡¦ğŸ‡²' },
      { id: 24, name: 'Australia', flag: 'ğŸ‡¦ğŸ‡º' },
      { id: 25, name: 'Austria', flag: 'ğŸ‡¦ğŸ‡¹' },
      { id: 26, name: 'Azerbaijan', flag: 'ğŸ‡¦ğŸ‡¿' },
      { id: 28, name: 'Bahrain', flag: 'ğŸ‡§ğŸ‡­' },
      { id: 29, name: 'Bangladesh', flag: 'ğŸ‡§ğŸ‡©' },
      { id: 30, name: 'Barbados', flag: 'ğŸ‡§ğŸ‡§' },
      { id: 31, name: 'Belarus', flag: 'ğŸ‡§ğŸ‡¾' },
      { id: 32, name: 'Belgium', flag: 'ğŸ‡§ğŸ‡ª' },
      { id: 37, name: 'Bosnia and Herzegovina', flag: 'ğŸ‡§ğŸ‡¦' },
      { id: 39, name: 'Brazil', flag: 'ğŸ‡§ğŸ‡·' },
      { id: 47, name: 'Canada', flag: 'ğŸ‡¨ğŸ‡¦' },
      { id: 51, name: 'Chile', flag: 'ğŸ‡¨ğŸ‡±' },
      { id: 52, name: 'China', flag: 'ğŸ‡¨ğŸ‡³' },
      { id: 53, name: 'Colombia', flag: 'ğŸ‡¨ğŸ‡´' },
      { id: 59, name: 'Croatia', flag: 'ğŸ‡­ğŸ‡·' },
      { id: 62, name: 'Czech Republic', flag: 'ğŸ‡¨ğŸ‡¿' },
      { id: 63, name: 'Denmark', flag: 'ğŸ‡©ğŸ‡°' },
      { id: 68, name: 'Ecuador', flag: 'ğŸ‡ªğŸ‡¨' },
      { id: 69, name: 'Egypt', flag: 'ğŸ‡ªğŸ‡¬' },
      { id: 198, name: 'England', flag: 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿' },
      { id: 76, name: 'Finland', flag: 'ğŸ‡«ğŸ‡®' },
      { id: 77, name: 'France', flag: 'ğŸ‡«ğŸ‡·' },
      { id: 80, name: 'Georgia', flag: 'ğŸ‡¬ğŸ‡ª' },
      { id: 81, name: 'Germany', flag: 'ğŸ‡©ğŸ‡ª' },
      { id: 82, name: 'Ghana', flag: 'ğŸ‡¬ğŸ‡­' },
      { id: 83, name: 'Greece', flag: 'ğŸ‡¬ğŸ‡·' },
      { id: 91, name: 'Hungary', flag: 'ğŸ‡­ğŸ‡º' },
      { id: 92, name: 'Iceland', flag: 'ğŸ‡®ğŸ‡¸' },
      { id: 93, name: 'India', flag: 'ğŸ‡®ğŸ‡³' },
      { id: 228, name: 'Indonesia', flag: 'ğŸ‡®ğŸ‡©' },
      { id: 94, name: 'Iran', flag: 'ğŸ‡®ğŸ‡·' },
      { id: 96, name: 'Ireland', flag: 'ğŸ‡®ğŸ‡ª' },
      { id: 97, name: 'Israel', flag: 'ğŸ‡®ğŸ‡±' },
      { id: 98, name: 'Italy', flag: 'ğŸ‡®ğŸ‡¹' },
      { id: 100, name: 'Japan', flag: 'ğŸ‡¯ğŸ‡µ' },
      { id: 101, name: 'Jordan', flag: 'ğŸ‡¯ğŸ‡´' },
      { id: 102, name: 'Kazakhstan', flag: 'ğŸ‡°ğŸ‡¿' },
      { id: 103, name: 'Kenya', flag: 'ğŸ‡°ğŸ‡ª' },
      { id: 106, name: 'South Korea', flag: 'ğŸ‡°ğŸ‡·' },
      { id: 121, name: 'Malaysia', flag: 'ğŸ‡²ğŸ‡¾' },
      { id: 128, name: 'Mexico', flag: 'ğŸ‡²ğŸ‡½' },
      { id: 134, name: 'Morocco', flag: 'ğŸ‡²ğŸ‡¦' },
      { id: 139, name: 'Netherlands', flag: 'ğŸ‡³ğŸ‡±' },
      { id: 140, name: 'New Zealand', flag: 'ğŸ‡³ğŸ‡¿' },
      { id: 143, name: 'Nigeria', flag: 'ğŸ‡³ğŸ‡¬' },
      { id: 144, name: 'Northern Ireland', flag: 'ğŸ‡¬ğŸ‡§' },
      { id: 145, name: 'Norway', flag: 'ğŸ‡³ğŸ‡´' },
      { id: 147, name: 'Pakistan', flag: 'ğŸ‡µğŸ‡°' },
      { id: 152, name: 'Peru', flag: 'ğŸ‡µğŸ‡ª' },
      { id: 153, name: 'Philippines', flag: 'ğŸ‡µğŸ‡­' },
      { id: 154, name: 'Poland', flag: 'ğŸ‡µğŸ‡±' },
      { id: 155, name: 'Portugal', flag: 'ğŸ‡µğŸ‡¹' },
      { id: 156, name: 'Qatar', flag: 'ğŸ‡¶ğŸ‡¦' },
      { id: 157, name: 'Romania', flag: 'ğŸ‡·ğŸ‡´' },
      { id: 158, name: 'Russia', flag: 'ğŸ‡·ğŸ‡º' },
      { id: 165, name: 'Saudi Arabia', flag: 'ğŸ‡¸ğŸ‡¦' },
      { id: 199, name: 'Scotland', flag: 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿' },
      { id: 166, name: 'Senegal', flag: 'ğŸ‡¸ğŸ‡³' },
      { id: 167, name: 'Serbia', flag: 'ğŸ‡·ğŸ‡¸' },
      { id: 170, name: 'Singapore', flag: 'ğŸ‡¸ğŸ‡¬' },
      { id: 171, name: 'Slovakia', flag: 'ğŸ‡¸ğŸ‡°' },
      { id: 172, name: 'Slovenia', flag: 'ğŸ‡¸ğŸ‡®' },
      { id: 175, name: 'South Africa', flag: 'ğŸ‡¿ğŸ‡¦' },
      { id: 176, name: 'Spain', flag: 'ğŸ‡ªğŸ‡¸' },
      { id: 181, name: 'Sweden', flag: 'ğŸ‡¸ğŸ‡ª' },
      { id: 182, name: 'Switzerland', flag: 'ğŸ‡¨ğŸ‡­' },
      { id: 186, name: 'Thailand', flag: 'ğŸ‡¹ğŸ‡­' },
      { id: 190, name: 'Tunisia', flag: 'ğŸ‡¹ğŸ‡³' },
      { id: 191, name: 'Turkey', flag: 'ğŸ‡¹ğŸ‡·' },
      { id: 195, name: 'Ukraine', flag: 'ğŸ‡ºğŸ‡¦' },
      { id: 196, name: 'United Arab Emirates', flag: 'ğŸ‡¦ğŸ‡ª' },
      { id: 200, name: 'USA', flag: 'ğŸ‡ºğŸ‡¸' },
      { id: 201, name: 'Uruguay', flag: 'ğŸ‡ºğŸ‡¾' },
      { id: 207, name: 'Wales', flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿' }
    ];
    
    // ==================== LOAD MATCHES ====================
    async function loadMatches() {
      try {
        const response = await fetch('/api/matches');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        console.log('âœ… Matches loaded:', data);
        
        allMatches = {
          football: data.football || [],
          basketball: data.basketball || [],
          tennis: data.tennis || []
        };
        
        renderSidebar();
        renderMatches();
        
      } catch (error) {
        console.error('âŒ Error loading matches:', error);
        showError();
      }
    }

// ==================== GET FLAG FOR LEAGUE ====================
function getFlagForLeague(leagueName) {
  const flagMap = {
    // Top 5 leagues
    'Premier League': 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿',
    'LaLiga': 'ğŸ‡ªğŸ‡¸',
    'La Liga': 'ğŸ‡ªğŸ‡¸',
    'Bundesliga': 'ğŸ‡©ğŸ‡ª',
    'Serie A': 'ğŸ‡®ğŸ‡¹',
    'Ligue 1': 'ğŸ‡«ğŸ‡·',
    
    // Balkan leagues
    'Premijer Liga': 'ğŸ‡§ğŸ‡¦',
    'Premijer Liga BiH': 'ğŸ‡§ğŸ‡¦',
    'HNL': 'ğŸ‡­ğŸ‡·',
    'SuperLiga': 'ğŸ‡·ğŸ‡¸',
    'Super Liga': 'ğŸ‡·ğŸ‡¸',
    
    // Other European leagues
    'Eredivisie': 'ğŸ‡³ğŸ‡±',
    'Primeira Liga': 'ğŸ‡µğŸ‡¹',
    'Jupiler Pro League': 'ğŸ‡§ğŸ‡ª',
    'Scottish Premiership': 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿',
    'Super League': 'ğŸ‡¬ğŸ‡·',
    'Swiss Super League': 'ğŸ‡¨ğŸ‡­',
    'Austrian Bundesliga': 'ğŸ‡¦ğŸ‡¹',
    'SÃ¼per Lig': 'ğŸ‡¹ğŸ‡·',
    'Russian Premier League': 'ğŸ‡·ğŸ‡º',
    'Ukrainian Premier League': 'ğŸ‡ºğŸ‡¦',
    'Polish Ekstraklasa': 'ğŸ‡µğŸ‡±',
    
    // South American leagues
    'BrasileirÃ£o': 'ğŸ‡§ğŸ‡·',
    'Serie A': 'ğŸ‡§ğŸ‡·',
    'Liga Profesional': 'ğŸ‡¦ğŸ‡·',
    'Primera DivisiÃ³n': 'ğŸ‡¦ğŸ‡·',
    
    // International competitions
    'UEFA Champions League': 'ğŸ†',
    'UEFA Europa League': 'ğŸ†',
    'UEFA Conference League': 'ğŸ†',
    'UEFA Nations League': 'ğŸ†',
    'World Cup': 'ğŸŒ',
    'World Cup Qualifiers': 'ğŸŒ',
    'European Championship': 'ğŸ‡ªğŸ‡º',
    'Copa America': 'ğŸ†',
    'Copa Libertadores': 'ğŸ†',
    'Copa Sudamericana': 'ğŸ†',
    
    // Basketball
    'NBA': 'ğŸ€',
    'EuroLeague': 'ğŸ†',
    'EuroCup': 'ğŸ†',
    'ABA League': 'ğŸ†',
    
    // Tennis
    'ATP Tour': 'ğŸ¾',
    'WTA Tour': 'ğŸ¾',
    'Grand Slam': 'ğŸ†',
    'Davis Cup': 'ğŸ†'
  };
  
  // Check exact match first
  if (flagMap[leagueName]) {
    return flagMap[leagueName];
  }
  
  // Check partial match
  for (const [key, flag] of Object.entries(flagMap)) {
    if (leagueName.includes(key)) {
      return flag;
    }
  }
  
  // Default
  return 'ğŸ†';
}

    
    // ==================== RENDER SIDEBAR ====================
    function renderSidebar() {
      const sidebar = document.getElementById('sidebar');
      const pinnedLeagues = getCurrentPinnedLeagues();
      const visibleCountries = showAllCountries ? COUNTRIES : COUNTRIES.slice(0, 10);
      
      const html = `
        <div class="sidebar-section">
          <div class="sidebar-title">ğŸ“Œ Pinned Leagues</div>
          ${pinnedLeagues.length > 0 ? pinnedLeagues.map(league => `
            <div class="pinned-league">
              <span class="league-flag">${league.flag}</span>
              <span>${league.name}</span>
              <span class="pin-icon" onclick="unpinLeague('${league.name.replace(/'/g, "\\'")}')">ğŸ“Œ</span>
            </div>
          `).join('') : '<div style="padding: 10px 20px; color: #a0aec0; font-size: 13px;">No pinned leagues</div>'}
        </div>
        
        <div class="sidebar-section">
          <div class="sidebar-title">ğŸŒ Countries</div>
          ${visibleCountries.map(country => `
            <div class="country-item ${expandedCountries[country.id] ? 'expanded' : ''}" id="country-${country.id}">
              <div class="country-header" onclick="toggleCountry(${country.id})">
                <span class="league-flag">${country.flag}</span>
                <span>${country.name}</span>
                <span class="country-arrow">â–¼</span>
              </div>
              <div class="country-leagues" id="leagues-${country.id}">
                ${expandedCountries[country.id] ? renderCountryLeagues(country.id) : ''}
              </div>
            </div>
          `).join('')}
          
          ${!showAllCountries ? `
            <div class="show-more-btn" onclick="showMoreCountries()">
              Show All Countries (${COUNTRIES.length})
            </div>
          ` : ''}
        </div>
      `;
      
      sidebar.innerHTML = html;
    }
    
    // ==================== TOGGLE COUNTRY ====================
    async function toggleCountry(countryId) {
      expandedCountries[countryId] = !expandedCountries[countryId];
      
      if (expandedCountries[countryId] && !countryLeagues[`${currentSport}-${countryId}`]) {
        await loadCountryLeagues(countryId);
      }
      
      renderSidebar();
    }
    
    // ==================== LOAD COUNTRY LEAGUES ====================
    async function loadCountryLeagues(countryId) {
      try {
        const sportId = currentSport === 'football' ? 1 : currentSport === 'basketball' ? 3 : 2;
        const response = await fetch(`/api/leagues?sport=${sportId}&country=${countryId}`);
        
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        countryLeagues[`${currentSport}-${countryId}`] = data.leagues || [];
        
        console.log(`âœ… Loaded ${countryLeagues[`${currentSport}-${countryId}`].length} leagues for ${currentSport}, country ${countryId}`);
        
      } catch (error) {
        console.error(`âŒ Error loading leagues for country ${countryId}:`, error);
        countryLeagues[`${currentSport}-${countryId}`] = [];
      }
    }
    
    // ==================== RENDER COUNTRY LEAGUES ====================
    function renderCountryLeagues(countryId) {
      const leagues = countryLeagues[`${currentSport}-${countryId}`] || [];
      const pinnedLeagues = getCurrentPinnedLeagues();
      
      if (leagues.length === 0) {
        return '<div class="country-league">Loading...</div>';
      }
      
      return leagues.map(league => {
        const isPinned = pinnedLeagues.some(p => p.name === league.name);
        return `
          <div class="country-league ${isPinned ? 'pinned' : ''}">
            <span>${league.name}</span>
            <span class="pin-icon" onclick="togglePinLeague('${league.name.replace(/'/g, "\\'")}', ${countryId})">
              ${isPinned ? 'ğŸ“Œ' : 'â•'}
            </span>
          </div>
        `;
      }).join('');
    }
    
    // ==================== PIN/UNPIN LEAGUE ====================
    function togglePinLeague(leagueName, countryId) {
      const country = COUNTRIES.find(c => c.id == countryId);
      const pinnedLeagues = getCurrentPinnedLeagues();
      const isPinned = pinnedLeagues.some(p => p.name === leagueName);
      
      if (isPinned) {
        unpinLeague(leagueName);
      } else {
        pinnedLeagues.push({ 
          name: leagueName, 
          flag: country?.flag || 'ğŸ†' 
        });
        pinnedLeaguesBySport[currentSport] = pinnedLeagues;
        localStorage.setItem('pinnedLeaguesBySport', JSON.stringify(pinnedLeaguesBySport));
        renderSidebar();
        renderMatches();
      }
    }
    
    function unpinLeague(leagueName) {
      const pinnedLeagues = getCurrentPinnedLeagues();
      pinnedLeaguesBySport[currentSport] = pinnedLeagues.filter(p => p.name !== leagueName);
      localStorage.setItem('pinnedLeaguesBySport', JSON.stringify(pinnedLeaguesBySport));
      renderSidebar();
      renderMatches();
    }
    
    // ==================== SHOW MORE COUNTRIES ====================
    function showMoreCountries() {
      showAllCountries = true;
      renderSidebar();
    }
    
    // ==================== RENDER MATCHES ====================
    function renderMatches() {
      const content = document.getElementById('content');
      let matches = allMatches[currentSport];
      const pinnedLeagues = getCurrentPinnedLeagues();
      const pinnedLeagueNames = pinnedLeagues.map(l => l.name);
      
      if (!matches || matches.length === 0) {
        content.innerHTML = `
          <div class="no-matches">
            <h2>No matches available</h2>
            <p>Check back soon for ${currentSport} matches!</p>
          </div>
        `;
        return;
      }
      
      if (pinnedLeagueNames.length > 0) {
        matches = matches.filter(match => 
          pinnedLeagueNames.some(pinned => 
            match.tournament_name && match.tournament_name.includes(pinned)
          )
        );
      }
      
      if (matches.length === 0) {
        content.innerHTML = `
          <div class="no-matches">
            <h2>No matches from pinned leagues</h2>
            <p>Pin some leagues from the sidebar to see matches!</p>
          </div>
        `;
        return;
      }
      
      const grouped = {};
      matches.forEach(match => {
        const leagueName = match.tournament_name || 'Unknown League';
        if (!grouped[leagueName]) {
          grouped[leagueName] = {
            name: leagueName,
            country: match.country_name || '',
            matches: []
          };
        }
        grouped[leagueName].matches.push(match);
      });
      
      const leagues = Object.values(grouped).sort((a, b) => {
        const aIndex = pinnedLeagueNames.findIndex(name => a.name.includes(name));
        const bIndex = pinnedLeagueNames.findIndex(name => b.name.includes(name));
        
        if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;
        if (aIndex !== -1) return -1;
        if (bIndex !== -1) return 1;
        return a.name.localeCompare(b.name);
      });
      
      const html = leagues.map(league => `
        <div class="league-section">
          <div class="league-header">
            <span class="league-country">${league.country}:</span>
            ${league.name}
          </div>
          ${league.matches.map(match => createMatchCard(match)).join('')}
        </div>
      `).join('');
      
      content.innerHTML = html;
    }
    
    // ==================== CREATE MATCH CARD ====================
    function createMatchCard(match) {
      const homeTeam = match.home_team?.name || 'Home';
      const awayTeam = match.away_team?.name || 'Away';
      const homeScore = match.home_team?.score ?? '-';
      const awayScore = match.away_team?.score ?? '-';
      const homeLogo = match.home_team?.image_path || '';
      const awayLogo = match.away_team?.image_path || '';
      
      let status = '';
      let statusClass = '';
      
      if (match.stage) {
        const stage = match.stage.toString();
        if (!isNaN(stage) && stage !== '0') {
          status = stage + "'";
          statusClass = 'live';
        } else if (stage === 'Finished') {
          status = 'FT';
        } else if (stage === 'Half Time' || stage === 'HT') {
          status = 'HT';
          statusClass = 'live';
        } else if (match.timestamp) {
          const matchDate = new Date(match.timestamp * 1000);
          status = matchDate.toLocaleTimeString('hr-HR', { hour: '2-digit', minute: '2-digit' });
        } else {
          status = stage;
        }
      } else if (match.timestamp) {
        const matchDate = new Date(match.timestamp * 1000);
        status = matchDate.toLocaleTimeString('hr-HR', { hour: '2-digit', minute: '2-digit' });
      }
      
      return `
        <div class="match-card">
          <div class="match-header">
            <div class="match-time ${statusClass}">${status}</div>
          </div>
          <div class="match-teams">
            <div class="team">
              ${homeLogo ? `<img src="${homeLogo}" class="team-logo" alt="${homeTeam}">` : ''}
              <div class="team-name">${homeTeam}</div>
              <div class="team-score">${homeScore}</div>
            </div>
            <div class="match-vs">-</div>
            <div class="team team-right">
              <div class="team-score">${awayScore}</div>
              <div class="team-name">${awayTeam}</div>
              ${awayLogo ? `<img src="${awayLogo}" class="team-logo" alt="${awayTeam}">` : ''}
            </div>
          </div>
        </div>
      `;
    }
    
    // ==================== SHOW ERROR ====================
    function showError() {
      document.getElementById('content').innerHTML = `
        <div class="no-matches">
          <h2>Failed to load matches</h2>
          <p>Please refresh the page or try again later.</p>
        </div>
      `;
    }
    
    // ==================== SPORT TAB CLICK ====================
    document.querySelectorAll('.sport-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.sport-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentSport = tab.dataset.sport;
        expandedCountries = {};
        showAllCountries = false;
        renderSidebar();
        renderMatches();
      });
    });
    
    // ==================== INIT ====================
    loadMatches();
    setInterval(loadMatches, 180000);
  </script>

</body>
</html>
